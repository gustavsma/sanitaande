{% comment %}
  Reusable gallery component
  Parameters:
  - category: folder name (outdoor, Portrait, Pregnancy)
  - limit: optional, number of images to show (default: all)
{% endcomment %}

{% assign category_path = 'images/' | append: include.category %}
{% assign all_images = "" | split: "" %}
{% for file in site.static_files %}
  {% if file.path contains category_path %}
    {% assign ext = file.extname | downcase %}
    {% if ext == '.jpg' or ext == '.jpeg' or ext == '.png' or ext == '.gif' or ext == '.webp' %}
      {% assign all_images = all_images | push: file %}
    {% endif %}
  {% endif %}
{% endfor %}
{% assign all_images = all_images | sort: "path" %}

{% if include.limit %}
  {% assign images = all_images | slice: 0, include.limit %}
{% else %}
  {% assign images = all_images %}
{% endif %}

<div class="masonry-gallery">
  {% for image in images %}
    <div class="masonry-item">
      <img alt="{{ image.basename }}"
        class="block w-full h-auto gallery-image"
        src="{{ site.baseurl }}{{ image.path }}" />
    </div>
  {% endfor %}
</div>
