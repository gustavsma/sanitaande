{% comment %}
  Reusable gallery component
  Parameters:
  - category: folder name (outdoor, Portrait, Pregnancy)
  - limit: optional, number of images to show (default: all)
{% endcomment %}

{% assign category_path = 'images/' | append: include.category %}
{% assign all_images = "" | split: "" %}
{% for file in site.static_files %}
  {% if file.path contains category_path %}
    {% assign ext = file.extname | downcase %}
    {% if ext == '.jpg' or ext == '.jpeg' or ext == '.png' or ext == '.gif' or ext == '.webp' %}
      {% assign all_images = all_images | push: file %}
    {% endif %}
  {% endif %}
{% endfor %}
{% assign all_images = all_images | sort: "path" %}

{% if include.limit %}
  {% assign images = all_images | slice: 0, include.limit %}
{% else %}
  {% assign images = all_images %}
{% endif %}

<div class="flex flex-wrap w-full">
  <div class="flex w-full md:w-1/2 flex-wrap">
    {% assign half = images.size | divided_by: 2 %}
    {% for image in images limit: half %}
      <div class="w-full {% cycle 'md:w-1/2', 'md:w-1/2', 'w-full' %} p-1">
        <div class="overflow-hidden h-full w-full">
          <div class="block h-full w-full">
            <img alt="{{ image.basename }}"
              class="block h-full w-full object-cover object-center opacity-0 animate-fade-in transition duration-500 transform scale-100 hover:scale-110"
              src="{{ site.baseurl }}{{ image.path }}" />
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="flex w-full md:w-1/2 flex-wrap">
    {% for image in images offset: half %}
      <div class="w-full {% cycle 'w-full', 'md:w-1/2', 'md:w-1/2', 'md:w-1/2', 'md:w-1/2' %} p-1">
        <div class="overflow-hidden h-full w-full">
          <div class="block h-full w-full">
            <img alt="{{ image.basename }}"
              class="block h-full w-full object-cover object-center opacity-0 animate-fade-in transition duration-500 transform scale-100 hover:scale-110"
              src="{{ site.baseurl }}{{ image.path }}" />
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
